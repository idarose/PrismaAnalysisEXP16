#Configuration file for the selector
#Format: | KEYWORD | value(s) | Unit of measure | Comment |
#Comments are ignored unit of measure # means none
#-----------------------------------------------------------

#-----------------------------------------------------------
DETECTORS_PRESENT
LABR			NO	#		Labr is present YES/NO
PRISMA			YES	#		Prisma is present YES/NO
AGATA			NO	#		Agata is present YES/NO
#-----------------------------------------------------------

#-----------------------------------------------------------
REPLAY_CONF
CONF_PATH				./Conf/Analysis		#Replay conf folder path
IN_PATH					./Data			#Input path
REPLAY_DIR_PATTERN			run_			#Replay directory pattern
IN_SUB_PATH				/Out/prisma		#Input sub path
IN_FILE_PATTERN				Prisma_			#Input file pattern
TREE_NAME				PrismaTree		#Input tree name
OUT_PATH				./Out			#Output path
OUT_FILE_PATTERN			run_			#Output file pattern
SUM_FILE_PATTERN			prisma			#Hadded file pattern
SUM_ALL_PATTERN				prismas			#Sum of all hadded files pattern
ENABLED_HISTOS				enabled_histos.conf #File name with list of enabled histograms

#-----------------------------------------------------------

#-----------------------------------------------------------
REACTION_CONF
REACTION_POSITION			0.5			#Position of the reaction in the taget 0->front 0.5->middle, 1->back
ENERGY					500	MeV		#Beam energy
TARGET					238 92			#Target ion A Z
BEAM					70 30			#Beam ion A Z
ION					70 30			#Fragment of interest for binary reaction calculation: A Z (those detected)
ION					68 28			#Fragment of interest for binary reaction calculation: A Z (those detected)
#-----------------------------------------------------------

#-----------------------------------------------------------
TARGET_CONF
ELOSS_TABLE_TYPE			0			#Type of eloss table 0 -> SRIM, 1-> Geant4, 2 ->Lise
MATERIAL				238-92			#Target material
THICKNESS				1	mg/cm2		#Target thickness-density in mg/cm2 or units alike
ROTATIONX				0	deg		#Target rotation on the X axis in degrees
ROTATIONZ				0	deg		#Target rotation on the Z axis in degrees
TILT					-45	deg		#Target tilt in degrees; Negative values for clockwise rotations
DEG_PRESENT				YES			#Degrader present YES/NO
DEG_MATERIAL				93-41			#Degrader material
DEG_POS					AFTER			#Degrader position BEFORE/AFTER
DEG_DISTANCE				0	um		#Degrader distance in um
DEG_THICKNESS				5.1	mg/cm2		#Degrader thickness in mg
#-----------------------------------------------------------

#-----------------------------------------------------------
AGATA_CONF
BIN_WIDTH				1			#Bin width in gamma histograms
COINC_W_LEFT_RIGHT_BKG			0			#Left Background time window on the right side of the coincidence peak
COINC_W_RIGHT_LEFT_BKG			0			#Right Background time window on the left side of the coincidence peak
COINC_W_LEFT_LEFT_BKG			0			#Left Background time window on the left side of the coincidence peak
COINC_W_RIGHT_RIGHT_BKG			0			#Right Background time window on the right side of the coincidence peak
COINC_W_RIGHT				100			#Time window right with with the same type of det
COINC_W_LEFT				-100			#Time window left with the same type of det
MIN_FOM_THR				0			#Min FOM to accept a tracked gamma (0-1)
ANGLE					125	deg		#Detector angle. For AGATA should be 180-prisma_angle
Y_SHIFT					0	mm		#Detector y shift for optimization purposes
Z_SHIFT					0	mm		#Detector z shift for optimization purposes
THETA_Y					0	deg		#Detector rotation on the vertical plane for optimization purposes
X_SHIFT					0	mm		#Detector x shift for optimization purposes
GAMMA_E_MAX				4095	keV		#Maximum gamma energy in histograms
Max_FOM_THR				2			#Max FOM to accept a tracked gamma (0-1.3), 1.2 are single interaction events
TIME_UNIT				10	ns		#Timestamp unit, should 10*ns
THETA_X					0	deg		#Detector rotation on the horizontal plane for optimization purposes
BETA_AVG_MAG				0.1			#Average beta magnitude Doppler correction for detector
PHI					0	deg		#Detector phi rotation for optimization purposes
CFD_UNIT				10	ns		#Cfd units
BETA_AVG_THETA				20	deg		#Average beta theta Doppler correction for detector
BETA_AVG_PHI				180	deg		#Average beta phi Doppler correction for detector
EXCLUDE_ANCILLARY			NO			#Only analyze event in anticoincidence with ancillaries
ENABLE_TREE				NO			#Ebable or disable detector TTree to save memory (strongly encouraged)
ENABLE_HISTS				YES			#Ebable or disable detector histos to save memory
EXCLUDE_TS				0 0	ms		#Exclude events in this  timestamp region, beginning of run is TS=0
LUT								#Lookup table path
SPECTRA_TYPE				TRACKED			#Spectra type: SEGMENT, CORE, CORE1, ADDBACK, TRACKED, CALORIMETER
#-----------------------------------------------------------

#-----------------------------------------------------------
PRISMA_CONF
#general
PRISMA_FILE_PATTERN			Prisma_				#Prisma input file pattern (for --update_prisma option only)
PRISMA_IN_PATH				./Out/prisma			#Prisma input path (for --update_prisma option only)
TOF_REF_FILE				./Conf/prisma/PrismaRefTOF.dat		#File with reference TOF offsets for each section for automatic TOF alignment
MANAGER_PATH				./Conf/Analysis/prismaManager.conf	#Path to manager file
TOF_FILE				./Conf/prisma/PrismaTOF.dat		#File with TOF offsets for each section
PRISMA_DIR_PATTERN			run_				#Prisma directory pattern (for --update_prisma option only)
MAPPING_FILE				./Conf/prisma/mapping.dat	#File with mapping for trajectory reconstruction
LUT									#Lookup table path
ANALYSIS_STAGES				ALL				#Analysis stages: RAWPROCESS, ANAPROCESS, RAW_ANA, HIGHLEVEL, ANA_HIGH, ALL
COINC_W_LEFT_RIGHT_BKG			0				#Left Background time window on the right side of the coincidence peak
COINC_W_RIGHT_LEFT_BKG			0				#Right Background time window on the left side of the coincidence peak
COINC_W_LEFT_LEFT_BKG			0				#Left Background time window on the left side of the coincidence peak
COINC_W_RIGHT_RIGHT_BKG			0				#Right Background time window on the right side of the coincidence peak
COINC_W_RIGHT				0				#Time window right with with the same type of det
COINC_W_LEFT				-1				#Time window left with the same type of det
X_SHIFT					0	mm			#Detector x shift for optimization purposes
Y_SHIFT					0	mm			#Detector y shift for optimization purposes
Z_SHIFT					0	mm			#Detector z shift for optimization purposes
THETA_X					0	deg			#Detector rotation on the horizontal plane for optimization purposes
THETA_Y					0	deg			#Detector rotation on the vertical plane for optimization purposes
ANGLE					55	deg			#Detector angle. For AGATA should be 180-prisma_angle
PHI					0	deg			#Detector phi rotation for optimization purposes
TARGET_SHIFT_X				0	mm			#Target X shift in mm
TARGET_SHIFT_Y				0	mm			#Target Y shift in mm
TARGET_SHIFT_Z				0	mm			#Target Z shift in mm
MIN_EX_ENE				-100				#Minimum Total Excitation energy in histograms
BETA_AVG_PHI				180	deg			#Average beta phi Doppler correction for detector
BETA_AVG_THETA				50	deg			#Average beta theta Doppler correction for detector
TIME_UNIT				10	ns			#Timestamp unit, should 10*ns
CFD_UNIT				10	ns			#Cfd units
BETA_AVG_MAG				0.1				#Average beta magnitude Doppler correction for detector
#definitions
DIPOLE_HEIGHT				200	mm			#Height of dipole
REF_BRHO				1.2	tesla*m			#Reference Brho
B_DIPOLE				0.710727 T			#Magnetic field of dipole
B_QUADRUPOLE				0.648260 T			#Magnetic field of quadrupole
GEOM_RADIUS				150	mm			#Geometrical radius of quadrupole
DIPOLE_RADIUS				1200	mm			#Radius of dipole
QUAD_RADIUS				160	mm			#Radius of quadrupole
QUAD_LENGTH				485	mm			#Length of quadrupole
TARGET_QUAD_DISTANCE			470	mm			#Distance from target to quadrupole
TARGET_MCP_DISTANCE			250	mm			#Distance from target to MCP
IN_DIPOLE_ANGLE				20	deg			#Angle of dipole in degrees
DIPOLE_FP_DISTANCE			3285	mm			#Distance from dipole to focal plane
TARGET_DIPOLE_DISTANCE			1600	mm			#Distance from target to dipole
#mcp
X_SCALE					1.				#Scale of X of MCP
Y_SCALE					1.				#Scale of Y of MCP
MCP_THETA_X				0	deg			#Intrinsic rotation around X axis of MCP
MCP_ANGLE				135.	deg			#MCP angle in degrees
#ppac
FP_SHIFT_Z				0	mm			#Focal plane Z shift in mm
FP_SHIFT_Y				0	mm			#Focal plane Y shift in mm
FP_SHIFT_X				0	mm			#Focal plane X shift in mm
BROKEN_PPAC_CHANNELS			0 0				#Broken MWPPAC segments: 1 -> broken, 0-> not broken
#ionch
MAX_IC_ENE				9000				#Maximum IC energy in histograms
MAX_IC_dENE				6000				#Maximum IC energy of deltaE in histograms
GASICA_THICKNESS			265	mm			#Assumed thickness of first layer od IC (for non-measured energy calculations)
#BROKEN_IC_CHANNELS			2 0				#Broken ionization channel segments: 1 -> broken, 0-> not broken
#tof
MIN_AOVERQ				2				#Minimum value of a over q in histograms
MAX_AOVERQ				4				#Maximum value of a over q in histograms
AQ_NBINS				1000				#Number of bins in A over Q plots 
#ppac
FP_HALF_HEIGHT				65	mm			#Half height of focal plane
FP_HALF_LENGTH				500	mm			#Half length of focal plane
#zed
DE_TYPE					6				#DE variable used for Z gates: 0 -> DE_AB, 1 -> DE_A, 2 -> RANGE
Z_ROT_ANGLE				12.5	deg			#Rotation of IC_DE_A vs IC_Eres Z matrix for energy correction
#mass
A_RANGE					64 76				#A for plots: min max
Z_RANGE					26 30				#Z for plots: min max
AQ_PLOTS				30 21 26			#A/Q conf for histos. Z qmin qmax
AQ_PLOTS				29 20 25			#A/Q conf for histos. Z qmin qmax
AQ_PLOTS				28 20 24			#A/Q conf for histos. Z qmin qmax
AQ_PLOTS				27 19 23			#A/Q conf for histos. Z qmin qmax
CHARGE_TYPE				0				#Graph used for Q gates : 0 -> E vs RBeta, 1 -> E/RBeta vs E
TRAJ_ANGULAR_TOLERANCE			1.3	deg			#Angular tolerance of trajectory
TAC_GAIN				0.01				#Gain for prisma tac
TAC_OFFSET				-19.01				#Offset for prisma tac
MAX_RBETA				0.15				#Maximum value of R*Beta in histograms
MIN_RBETA				0.06				#Minimum value of R*Beta in histograms
FP_TOLERANCE				1	mm			#Tolerance of focal plane
TOF_GAIN				1				#Gain for recalibration of TOF
TOF_OFFSET				-30	ns			#Offset for recalibration of TOF
OUT_DIPOLE_ANGLE			125	deg			#Angle of dipole in degrees
MAX_EX_ENE				100				#Maximum Total Excitation energy in histograms
#flags
AGATA_OPPOSITE				YES				#Fixes the agata angle to be 180 - prisma angle
PRISMA_UNITS_CUTS			NO				#Enable prisma units cuts for lengths in the cuts
PRISMAFILTER_TKEL			NO				#Use prismafilter TKEL instead of internal calculations
ENABLE_TOF_ALIGN			NO				#Enable TOF alignment from TOF_ALIGN
ENABLE_MAPPING				NO				#Enable trajectory reconstruction with mapping
ENABLE_REFTREE				NO				#Enable preprocess reference tree filling. For tuning reconstruction parameters
ENABLE_PREPROTREE			NO				#Enable preprocess tree filling, similar to the output of the prismafilters
ENABLE_HISTS				YES				#Ebable or disable detector histos to save memory
ENABLE_TREE				NO				#Ebable or disable detector TTree to save memory (strongly encouraged)
ENABLE_TRAJPLOT				NO				#Enable trajectory plot
MISC_HISTS				YES				#Enable misc histos
RAW_HISTS				YES				#Enable raw histos
ANA_HISTS				YES				#Enable ana histos
AOVERQ_HISTS				YES				#Enable A over Q histos
AOVERQ_TEVO_HISTS			NO				#Enable time evolution A over Q histos
REQUIRE_SIDEOK				YES				#Require ionization chamber side ok in analysis
REQUIRE_TRAJOK				YES				#Require trajectory ok in analysis
REQUIRE_TOFOK				YES				#Require time of flight ok in analysis
REQUIRE_MCPOK				YES				#Require mcp ok in analysis
REQUIRE_ICOK				YES				#Require ionization chamber ok in analysis

#-----------------------------------------------------------

#-----------------------------------------------------------
LABR_CONF
REFERENCE			16	#			Reference ID for time alignment
BIN_WIDTH			1	#			Bin width in gamma histograms
COINC_W_LEFT_RIGHT_BKG			0	#			Left Background time window on the right side of the coincidence peak
COINC_W_RIGHT_LEFT_BKG			0	#			Right Background time window on the left side of the coincidence peak
COINC_W_LEFT_LEFT_BKG			0	#			Left Background time window on the left side of the coincidence peak
COINC_W_RIGHT_RIGHT_BKG			0	#			Right Background time window on the right side of the coincidence peak
COINC_W_RIGHT			10	#			Time window right with with the same type of det
COINC_W_LEFT			-1	#			Time window left with the same type of det
ANGLE			0	deg			Detector angle. For AGATA should be 180-prisma_angle
Y_SHIFT			0	mm			Detector y shift for optimization purposes
E_GAIN			1	#			Gain in energy (recalibratyion)
Z_SHIFT			0	mm			Detector z shift for optimization purposes
THETA_Y			0	deg			Detector rotation on the vertical plane for optimization purposes
X_SHIFT			0	mm			Detector x shift for optimization purposes
GAMMA_E_MAX			4000	keV			Maximum gamma energy in histograms
E_SHIFT			0	#			Shift in energy (recalibratyion)
TIME_UNIT			10	ns			Timestamp unit, should 10*ns
THETA_X			0	deg			Detector rotation on the horizontal plane for optimization purposes
BETA_AVG_MAG			0.1	#			Average beta magnitude Doppler correction for detector
PHI			0	deg			Detector phi rotation for optimization purposes
CFD_UNIT			0.001	ns			Cfd units
BETA_AVG_THETA			20	deg			Average beta theta Doppler correction for detector
BETA_AVG_PHI			180	deg			Average beta phi Doppler correction for detector
EXCLUDE_ANCILLARY			NO	#		Only analyze event in anticoincidence with ancillaries
ENABLE_TREE			NO	#		Ebable or disable detector TTree to save memory (strongly encouraged)
ENABLE_HISTS			YES	#		Ebable or disable detector histos to save memory
EXCLUDE_TS			0 0	ms			Exclude events in this  timestamp region, beginning of run is TS=0
LUT			LUT_LABR.dat	#		Lookup table path
ION			1 1	#			Ion assumed in labr
SPECTRA_TYPE			CORE					Spectra type: SEGMENT, CORE, CORE1, ADDBACK, TRACKED, CALORIMETER
#-----------------------------------------------------------
#-----------------------------------------------------------
AGATAPRISMA_CONF
COINC_W_LEFT_RIGHT_BKG			0			#Left Background time window on the right side of the coincidence peak
COINC_W_RIGHT_LEFT_BKG			0			#Right Background time window on the left side of the coincidence peak
COINC_W_LEFT_LEFT_BKG			0			#Left Background time window on the left side of the coincidence peak
COINC_W_RIGHT_RIGHT_BKG			0			#Right Background time window on the right side of the coincidence peak
COINC_W_RIGHT				100			#Time window right
COINC_W_LEFT				-100			#Time window left
LIFETIME_IONBP				0	ns		#Mean lifetime of populated excited state for binary partner to compute displacement from target
LIFETIME_ION				0	ns		#Mean lifetime of populated excited state for detected ion to compute displacement from target
EVENT_BY_EVENT				YES			#YES: only event by event combinations are validated
ENABLE_REDBRANCH			NO			#Enable saving simple gamma energies instead of TLorentzVectors
ENABLE_TREE				NO			#Enable or disable coincidence TTree branch to save memory (strongly encouraged)
ENABLE_HISTS				YES			#Enable histograms of coincidence
EX_VALUES				0 1	MeV		#Excitation energy gates, first value is the min, second value is the max
BP_FRAGMENT_POSITION			MID_TARGET		#Doppler correction position for binary partner
FRAGMENT_POSITION			MID_TARGET		#Doppler correction position for detected ion
#-----------------------------------------------------------

#-----------------------------------------------------------
LABRPRISMA_CONF
COINC_W_LEFT_RIGHT_BKG			0	#			Left Background time window on the right side of the coincidence peak
COINC_W_RIGHT_LEFT_BKG			0	#			Right Background time window on the left side of the coincidence peak
COINC_W_LEFT_LEFT_BKG			0	#			Left Background time window on the left side of the coincidence peak
COINC_W_RIGHT_RIGHT_BKG			0	#			Right Background time window on the right side of the coincidence peak
COINC_W_RIGHT			0	#			Time window right
COINC_W_LEFT			0	#			Time window left
LIFETIME_IONBP			0	ns			Mean lifetime of populated excited state for binary partner to compute displacement from target
LIFETIME_ION			0	ns			Mean lifetime of populated excited state for detected ion to compute displacement from target
EVENT_BY_EVENT			YES	#		YES: only event by event combinations are validatedNO: full built events are in coincidence if any combination of the detectors are in coincidence
ENABLE_REDBRANCH			NO	#		Enable saving simple gamma energies instead of TLorentzVectors
ENABLE_TREE			NO	#		Enable or disable coincidence TTree branch to save memory (strongly encouraged)
ENABLE_HISTS			YES	#		Enable histograms of coincidence
EX_VALUES			0 1	MeV			Excitation energy gates, first value is the min, second value is the max
BP_FRAGMENT_POSITION			MID_TARGET					Doppler correction position for binary partner
FRAGMENT_POSITION			MID_TARGET					Doppler correction position for detected ion
#-----------------------------------------------------------

#-----------------------------------------------------------
USER_CONF
EXAMPLE			0	mm			Example of configuration value
#-----------------------------------------------------------

#-----------------------------------------------------------
OPTIMIZER_CONF
TAIL			0	#			0: notail, 1: right, 2: left, 3: left+right, 4: symmetric
BKG_POL_ORDER			1	#			Polynomial order for background
PRINT_LEVEL			1	#			Minimizer verbosity
MAX_CALLS			1000	#			Maximum number of minimizer calls
NON_CONVERGENCE_COST			5	#			Multiplier cost for fits that did not converge
SIGMA_WEIGHT			0.5	#			Figure of merit weight on sigma. 0 means only the centroid is optimized, 1 means only the sigma, values in between are a combination
PRECISION			0.01	#			Minimizer precision (likely leave 0 for optimally calculated value)
TOLERANCE			0.1	#			Minimizer tolerance
ONLY_SCAN			NO	#		Skips the minimization and only performs the scan
SAVE_SCAN_FILES			NO	#		Saves the output of all scan points for each parameter
VALID_ERRORS			NO	#		Performs error analysis (e.g. run Hesse for Minuit)
USE_INTERVALS			NO	#		Use intervals in minimization (try what is best)
ALGORITHM			Simplex	#		Name of algorithm (Migrad, Simplex,...) see: tutorials/fit/NumericalMinimization.C.html
MINIMIZER			Minuit	#		Name of minimizer (Minuit/Minuit2, Fumili, GLSMultiMin, Genetic)
ROOT_FILE			out.root	#		Name optimizer output file
LOG_FILE			log.txt	#		Name of log file for minimizer
FIT_PAR_FILE			parameters.dat	#		Name of parameter file for fitter
