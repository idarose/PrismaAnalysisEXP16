#Configuration file for the selector
#Format: | KEYWORD | value(s) | Unit of measure | Comment |
#Comments are ignored unit of measure # means none
#-----------------------------------------------------------

#-----------------------------------------------------------
DETECTORS_PRESENT
LABR			NO	#		Labr is present YES/NO
PRISMA			YES	#		Prisma is present YES/NO
AGATA           YES
#-----------------------------------------------------------

#-----------------------------------------------------------
REPLAY_CONF
ENABLED_HISTOS			enabled_histos_agata.conf	#		File name with list of enabled histograms
TREE_NAME			TreeMaster	#		Input tree name
SUM_FILE_PATTERN		sum	#		Hadded file pattern
OUT_FILE_PATTERN		run_	#		Output file pattern
IN_SUB_PATH			/Out/Analysis	#		Input sub path
IN_PATH				./Data	#		Input path
IN_FILE_PATTERN			Tree_	#		Input file pattern
OUT_PATH			./Out	#		Output path
CONF_PATH			./Conf2024_from234_offline_180525/Analysis	#		Replay conf folder path
#CONF_PATH           ./PrismaConf
REPLAY_DIR_PATTERN		run_	#		Replay directory pattern
#-----------------------------------------------------------

#-----------------------------------------------------------
REACTION_CONF
ENERGY			500	MeV			Beam energy
TARGET			238 92	#			Target ion A Z
BEAM			70 30	#			Beam ion A Z
ION			70 30	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			71 30	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			72 30	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			73 30	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			74 30	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			66 28	#			Fragment of interest for binary reaction calculation: A Z (those detected)
ION			67 28	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			68 28	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			69 28	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			70 28	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			71 28	#			Fragment of interest for binary reaction calculation: A Z (those detected)
ION			69 29	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			67 29	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			65 27	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			67 27	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			62 26	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#ION			64 26	#			Fragment of interest for binary reaction calculation: A Z (those detected)
#-----------------------------------------------------------

#-----------------------------------------------------------
TARGET_CONF
DEG_DISTANCE			0	um			Degrader distance in um
ROTATIONZ			0	deg			Target rotation on the Z axis in degrees
ROTATIONX			0	deg			Target rotation on the X axis in degrees
THICKNESS			1	mg/cm2			Target thickness-density in mg/cm2 or units alike
DEG_THICKNESS			5.1	mg/cm2			Degrader thickness in um
TILT				-45	deg			Target tilt in degrees; Negative values for clockwise rotations
DEG_PRESENT			YES	#		Degrader present YES/NO
DEG_MATERIAL			93-41	#		Degrader material
#DEG_MATERIAL			NONE	#		Degrader material
MATERIAL			238-92	#		Target material
#MATERIAL			NONE	#		Target material
DEG_POS				AFTER					Degrader position BEFORE/AFTER
#-----------------------------------------------------------

#-----------------------------------------------------------
AGATA_CONF
BIN_WIDTH			2	#			Bin width in gamma histograms
COINC_W_LEFT			0	#			Time window left with the same type of det
COINC_W_RIGHT			10	#			Time window right with with the same type of det
CFD_UNIT			10	ns			Cfd units
TIME_UNIT			10	ns			Timestamp unit, should 10*ns
X_SHIFT				0	mm			Detector x shift for optimization purposes
Z_SHIFT				0	mm			Detector z shift for optimization purposes
ANGLE				125	deg			Detector angle. For AGATA should be 180-prisma_angle
Y_SHIFT				0	mm			Detector y shift for optimization purposes
GAMMA_E_MAX			3000	keV			Maximum gamma energy in histograms
THETA_Y				0	deg			Detector rotation on the vertical plane for optimization purposes
PHI				0	deg			Detector phi rotation for optimization purposes
THETA_X				0	deg			Detector rotation on the horizontal plane for optimization purposes
ENABLE_TREE			NO	#		Ebable or disable detector TTree to save memory (strongly encouraged)
ENABLE_HISTS			YES	#		Ebable or disable detector histos to save memory
LUT				NONE	#		Lookup table path
BETA_AVG			-0.069 0.0 0.0487	#			Average Doppler correction for detector
SPECTRA_TYPE			ADDBACK					Spectra type: SEGMENT, CORE, CORE1, ADDBACK, TRACKED, CALORIMETER
#-----------------------------------------------------------

#-----------------------------------------------------------
PRISMA_CONF
DE_TYPE				6	#			DE variable used for Z gates: 0 -> DE_AB, 1 -> DE_A, 2 -> RANGE
AQ_NBINS			1000	#			Number of bins in A over Q plots 
COINC_W_LEFT			-500	#			Time window left with the same type of det
COINC_W_RIGHT			500	#			Time window right with with the same type of det
MAX_IC_ENE			10000	#			Maximum IC energy in histograms
MAX_IC_dENE			7000	#			Maximum IC energy of deltaE in histograms
TAC_OFFSET			-19.01	#			Offset for prisma tac
TAC_GAIN			0.01	#			Gain for prisma tac
TOF_OFFSET		 	-30	ns			Offset for recalibration of TOF
THETA_X				0	deg			Detector rotation on the horizontal plane for optimization purposes
PHI				0	deg			Detector phi rotation for optimization purposes
ANGLE				55	deg			Detector angle. For AGATA should be 180-prisma_angle
Z_SHIFT				0	mm			Detector z shift for optimization purposes
THETA_Y				0	deg			Detector rotation on the vertical plane for optimization purposes
X_SHIFT				0	mm			Detector x shift for optimization purposes
X_SCALE				1	#			Scale of X of MCP
TIME_UNIT			10	ns			Timestamp unit, should 10*ns
MIN_RBETA           0.
MAX_RBETA           1.
DIPOLE_HEIGHT       200     mm                      #Height of dipole
REF_BRHO            1.2 tesla*m
B_DIPOLE            0.710727 T
B_QUADRUPOLE        0.648260 T
QUAD_LENGTH         485 mm
TARGET_QUAD_DISTANCE    470 mm
TOF_GAIN			1	#			Gain for recalibration of TOF
CFD_UNIT			10	ns			Cfd units
BETA_GAIN			1	#			Gain for recalibration of Beta
MCP_THETA_X			0	deg			Intrinsic rotation around X axis of MCP
MCP_ANGLE			135	deg			Intrinsic theta rotation of MCP
BETA_OFFSET			0	#			Offset for recalibration of Beta
Y_SHIFT				0	mm			Detector y shift for optimization purposes
Y_SCALE				1	#			Scale of Y of MCP
ANALYSIS_STAGES         ALL #
PRISMA_UNITS_CUTS       NO  #       Use prisma units for cuts
REQUIRE_ICOK            YES  #       Require ionization chamber ok in analysis
REQUIRE_SIDEOK          YES  #       Require ionization chamber side ok in analysis
REQUIRE_TRAJOK          YES  #       Require trajectory ok in analysis
REQUIRE_TOFOK           YES  #       Require time of flight ok in analysis
REQUIRE_MCPOK           YES  #       Require mcp ok in analysis
ENABLE_TREE             NO  #       Enable or disable detector TTree to save memory (strongly encouraged)
ENABLE_PREPROTREE       YES #           Enable preprocessed tree
PRISMAFILTER_TKEL       NO #       Use prismafilter TKEL instead of internal calculations
ENABLE_HISTS            YES #       Enable or disable detector histos to save memory
RAW_HISTS               YES  #       Enable raw histos
ANA_HISTS               YES #       Enable ana histos
MISC_HISTS              YES  #       Enable misc histos
AOVERQ_HISTS            YES #       Enable A over Q histos
AOVERQ_TEVO_HISTS       NO  #       Enable time evolution A over Q histos
A_RANGE				56 76	#			A for plots: min max
Z_RANGE				26 32	#			Z for plots: min max
Z_ROT_ANGLE         50.4 deg
#BROKEN_PPAC_CHANNELS		9 0	#			Broken MWPPAC segments: 1 -> broken, 0-> not broken
#BROKEN_IC_CHANNELS		2 1	#			Broken ionization channel segments: 1 -> broken, 0-> not broken
PRISMA_FILE_PATTERN		Tree_	#		Prisma input file pattern (for --update_prisma option only)
PRISMA_DIR_PATTERN		run_	#		Prisma directory pattern (for --update_prisma option only)
MANAGER_PATH            ./PrismaConf/prismaManager.conf   #       Prisma manager path
LUT				NONE	#		Lookup table path
PRISMA_IN_PATH			./Data/Analysis	#		Prisma input path (for --update_prisma option only)
BETA_AVG			-0.069 0.0 0.0487	#			Average Doppler correction for detector
CHARGE_TYPE		0
MIN_AOVERQ          0.
MAX_AOVERQ          5.
AQ_PLOTS			31 20 29	#			A/Q conf for histos. Z qmin qmax
AQ_PLOTS			30 20 29	#			A/Q conf for histos. Z qmin qmax
AQ_PLOTS			29 20 29	#			A/Q conf for histos. Z qmin qmax
AQ_PLOTS			28 20 29	#			A/Q conf for histos. Z qmin qmax
AQ_PLOTS			27 20 29	#			A/Q conf for histos. Z qmin qmax
AQ_PLOTS			26 20 29	#			A/Q conf for histos. Z qmin qmax
#-----------------------------------------------------------

#-----------------------------------------------------------
LABR_CONF
BIN_WIDTH			1	#			Bin width in gamma histograms
COINC_W_LEFT			0	#			Time window left with the same type of det
COINC_W_RIGHT			10	#			Time window right with with the same type of det
E_GAIN				1	#			Gain in energy (recalibratyion)
E_SHIFT				0	#			Shift in energy (recalibratyion)
CFD_UNIT			0.001	ns			Cfd units
TIME_UNIT			10	ns			Timestamp unit, should 10*ns
X_SHIFT				0	mm			Detector x shift for optimization purposes
Z_SHIFT				0	mm			Detector z shift for optimization purposes
ANGLE				0	deg			Detector angle. For AGATA should be 180-prisma_angle
Y_SHIFT				0	mm			Detector y shift for optimization purposes
GAMMA_E_MAX			4000	keV			Maximum gamma energy in histograms
THETA_Y				0	deg			Detector rotation on the vertical plane for optimization purposes
PHI				0	deg			Detector phi rotation for optimization purposes
THETA_X				0	deg			Detector rotation on the horizontal plane for optimization purposes
ENABLE_TREE			NO	#		Ebable or disable detector TTree to save memory (strongly encouraged)
ENABLE_HISTS			YES	#		Ebable or disable detector histos to save memory
LUT				LUT_LABR.dat	#		Lookup table path
BETA_AVG			0 0 0	#			Average Doppler correction for detector
ION				1 1	#			Ion assumed in labr
SPECTRA_TYPE			CORE					Spectra type: SEGMENT, CORE, CORE1, ADDBACK, TRACKED, CALORIMETER
#-----------------------------------------------------------


#-----------------------------------------------------------
AGATAPRISMA_CONF
COINC_W_RIGHT			100	#			Time window right
COINC_W_LEFT			-100	#			Time window left
BP_FRAGMENT_POSITION		MID_TARGET					Doppler correction position for binary partner
FRAGMENT_POSITION		END_DEGRADER					Doppler correction position for detected ion
#FRAGMENT_POSITION		END_TARGET					Doppler correction position for detected ion
#-----------------------------------------------------------

#-----------------------------------------------------------
LABRPRISMA_CONF
COINC_W_RIGHT			0	#			Time window right
COINC_W_LEFT			0	#			Time window left
BP_FRAGMENT_POSITION		MID_TARGET					Doppler correction position for binary partner
FRAGMENT_POSITION		MID_TARGET					Doppler correction position for detected ion
#-----------------------------------------------------------

#-----------------------------------------------------------
AGATALABR_CONF
COINC_W_RIGHT			0	#			Time window right
COINC_W_LEFT			0	#			Time window left
BP_FRAGMENT_POSITION		MID_TARGET					Doppler correction position for binary partner
FRAGMENT_POSITION		MID_TARGET					Doppler correction position for detected ion
#-----------------------------------------------------------

#-----------------------------------------------------------
USER_CONF
EXAMPLE				0	mm			Example of configuration value
#-----------------------------------------------------------

#-----------------------------------------------------------
OPTIMIZER_CONF
TAIL			3	#			0: notail, 1: right, 2: left, 3: left+right, 4: symmetric
BKG_POL_ORDER			1	#			Polynomial order for background
MAX_CALLS			1000	#			Maximum number of minimizer calls
PRINT_LEVEL			1	#			Minimizer verbosity
NON_CONVERGENCE_COST		5	#			Multiplier cost for fits that did not converge
SIGMA_WEIGHT			0.5	#			Figure of merit weight on sigma. 0 means only the centroid is optimized, 1 means only the sigma, values in between are a combination
TOLERANCE			0.1	#			Minimizer tolerance
PRECISION			0.01	#			Minimizer precision (likely leave 0 for optimally calculated value)
VALID_ERRORS			NO	#		Performs error analysis (e.g. run Hesse for Minuit)
USE_INTERVALS			YES	#		Use intervals in minimization (try what is best)
ALGORITHM			Simplex	#		Name of algorithm (Migrad, Simplex,...) see: tutorials/fit/NumericalMinimization.C.html
MINIMIZER			Minuit	#		Name of minimizer (Minuit/Minuit2, Fumili, GLSMultiMin, Genetic)
FIT_PAR_FILE			parameters.dat	#		Name of parameter file for fitter
ROOT_FILE			out.root	#		Name optimizer output file
LOG_FILE			log.txt	#		Name of log file for minimizer
ONLY_SCAN           YES
TRANSITION          Prisma      Ana/Mass/Zed_Gated/1D/h_Mass_30     70  0.05 0.0 1
PARAMETER           PRISMA_CONF  QUAD_LENGTH  430.   430. 500. 5. mm
SCAN                PRISMA_CONF  QUAD_LENGTH  430.   430. 500. 5. mm



USER_CONF
